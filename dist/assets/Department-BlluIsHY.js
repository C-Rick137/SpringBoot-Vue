/* empty css             *//* empty css                   *//* empty css                  *//* empty css                   *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{r as D,K as P,c as T,a as m,b as a,w as n,L as s,M as g,A as I,B as M,O,C as R,P as $,o as q,d,u as _,Q as A,R as F,S as J,T as j,Z as K}from"./index-C0GlKI4r.js";import{r as p}from"./request-ClfIVEhE.js";const L={class:"card",style:{"margin-bottom":"5px"}},Q={class:"card",style:{"margin-bottom":"5px"}},Z={class:"card",style:{"margin-bottom":"5px"}},G={style:{"margin-top":"15px"}},H={class:"dialog-footer"},ie={__name:"Department",setup(W){const e=D({name:null,tableData:[],pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},ids:[],rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}),f=P(),r=()=>{p.get("/department/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(o=>{e.tableData=o.data.list,e.total=o.data.total})};r();const b=()=>{e.name=null,r()},y=()=>{e.formVisible=!0,e.form={}},V=()=>{f.value.validate(o=>{o&&(e.form.id?x():C())})},C=()=>{p.post("/department/add",e.form).then(o=>{o.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(o.msg)})},x=()=>{p.put("/department/update",e.form).then(o=>{o.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(o.msg)})},k=o=>{e.form=JSON.parse(JSON.stringify(o)),e.formVisible=!0},v=o=>{g.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{p.delete("/department/deleteById/"+o).then(t=>{t.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(t.msg)})}).catch()},w=o=>{e.ids=o.map(t=>t.id)},S=()=>{if(e.ids.length===0){s.warning("请选择数据");return}g.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{p.delete("/department/deleteBatch",{data:e.ids}).then(o=>{o.code==="200"?(e.formVisible=!1,s.success("操作成功"),r()):s.error(o.msg)})}).catch()};return(o,t)=>{const c=I,i=M,u=J,h=O,z=R,E=j,N=K,B=$;return q(),T("div",null,[m("div",L,[a(c,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),placeholder:"请输入名称查询","prefix-icon":"Search",style:{width:"240px","margin-right":"10px"}},null,8,["modelValue"]),a(i,{type:"primary",onClick:r},{default:n(()=>t[6]||(t[6]=[d("查 询")])),_:1}),a(i,{type:"warning",onClick:b},{default:n(()=>t[7]||(t[7]=[d("重 置")])),_:1})]),m("div",Q,[a(i,{type:"primary",onClick:y},{default:n(()=>t[8]||(t[8]=[d("新 增")])),_:1}),a(i,{type:"danger",onClick:S},{default:n(()=>t[9]||(t[9]=[d("批量删除")])),_:1})]),m("div",Z,[a(h,{data:e.tableData,stripe:"",onSelectionChange:w},{default:n(()=>[a(u,{type:"selection",width:"55"}),a(u,{label:"名称",prop:"name"}),a(u,{label:"操作",width:"120"},{default:n(l=>[a(i,{icon:_(A),circle:"",type:"primary",onClick:U=>k(l.row)},null,8,["icon","onClick"]),a(i,{icon:_(F),circle:"",type:"danger",onClick:U=>v(l.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),m("div",G,[a(z,{"current-page":e.pageNum,"onUpdate:currentPage":t[1]||(t[1]=l=>e.pageNum=l),"page-size":e.pageSize,"onUpdate:pageSize":t[2]||(t[2]=l=>e.pageSize=l),"page-sizes":[5,10,15,20],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:r,onCurrentChange:r},null,8,["current-page","page-size","total"])])]),a(B,{modelValue:e.formVisible,"onUpdate:modelValue":t[5]||(t[5]=l=>e.formVisible=l),"destroy-on-close":"",title:"部门信息",width:"500"},{footer:n(()=>[m("div",H,[a(i,{onClick:t[4]||(t[4]=l=>e.formVisible=!1)},{default:n(()=>t[10]||(t[10]=[d("取 消")])),_:1}),a(i,{type:"primary",onClick:V},{default:n(()=>t[11]||(t[11]=[d("保 存")])),_:1})])]),default:n(()=>[a(N,{ref_key:"formRef",ref:f,model:e.form,rules:e.rules,"label-width":"80px",style:{"padding-right":"40px","padding-top":"20px"}},{default:n(()=>[a(E,{label:"名称",prop:"name"},{default:n(()=>[a(c,{modelValue:e.form.name,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.name=l),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ie as default};
