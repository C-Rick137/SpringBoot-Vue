/* empty css             *//* empty css                  *//* empty css               */import{r as w}from"./request-ClfIVEhE.js";import{K as c,r as g,c as _,b as r,w as a,Z as V,o as x,a as P,d as E,L as n,A as b,T as h,B as v}from"./index-C0GlKI4r.js";const y={class:"card",style:{width:"50%",padding:"40px 20px","margin-left":"300px"}},B={style:{"text-align":"center"}},k={__name:"Password",setup(q){const p=(l,o,s)=>{o?o!==e.form.newPassword?s(new Error("两次输入密码不一致")):s():s(new Error("请再次确认新密码"))},m=c(),e=g({form:{},rules:{password:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPassword:[{required:!0,validator:p,trigger:"blur"}]},user:JSON.parse(localStorage.getItem("springBoot-Vue-user"))}),u=()=>{e.form.id=e.user.id,e.form.role=e.user.role,m.value.validate(l=>{l&&w.put("updatePassword",e.form).then(o=>{o.code==="200"?(n.success("修改成功"),localStorage.removeItem("springBoot-Vue-user"),setTimeout(()=>{location.href="/login"},500)):n.error(o.msg)})})};return(l,o)=>{const s=b,d=h,i=v,f=V;return x(),_("div",y,[r(f,{ref_key:"formRef",ref:m,model:e.form,rules:e.rules,"label-width":"100px",style:{"padding-right":"40px","padding-top":"20px"}},{default:a(()=>[r(d,{label:"原密码",prop:"password"},{default:a(()=>[r(s,{modelValue:e.form.password,"onUpdate:modelValue":o[0]||(o[0]=t=>e.form.password=t),autocomplete:"off",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),r(d,{label:"新密码",prop:"newPassword"},{default:a(()=>[r(s,{modelValue:e.form.newPassword,"onUpdate:modelValue":o[1]||(o[1]=t=>e.form.newPassword=t),autocomplete:"off",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),r(d,{label:"确认新密码",prop:"confirmPassword"},{default:a(()=>[r(s,{modelValue:e.form.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=t=>e.form.confirmPassword=t),autocomplete:"off",placeholder:"请再次确认新密码","show-password":""},null,8,["modelValue"])]),_:1}),P("div",B,[r(i,{style:{padding:"20px 30px"},type:"primary",onClick:u},{default:a(()=>o[3]||(o[3]=[E("立即修改")])),_:1})])]),_:1},8,["model","rules"])])}}};export{k as default};
