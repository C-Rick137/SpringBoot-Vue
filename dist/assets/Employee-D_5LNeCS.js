/* empty css             *//* empty css                   *//* empty css                  *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css                   *//* empty css                *//* empty css                 */import{r as $,K as J,c as b,a as c,b as t,w as n,L as s,M as x,A as j,B as G,N as K,O as Q,C as W,P as X,o as g,d as m,i as Y,u as w,Q as Z,R as H,F as ee,z as le,f as te,S as oe,T as ae,U as ne,V as re,W as se,X as de,Y as ie,Z as me}from"./index-C0GlKI4r.js";import{r as u}from"./request-ClfIVEhE.js";const pe={class:"card",style:{"margin-bottom":"5px"}},ue={class:"card",style:{"margin-bottom":"5px"}},fe={class:"card",style:{"margin-bottom":"5px"}},ce=["src"],ge={style:{"margin-top":"15px"}},be={class:"dialog-footer"},ze={__name:"Employee",setup(_e){const e=$({name:null,tableData:[],pageNum:1,pageSize:10,total:0,formVisible:!1,form:{},ids:[],departmentList:[],rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],no:[{required:!0,message:"请输入工号",trigger:"blur"}]}}),_=J();u.get("/department/selectAll").then(a=>{e.departmentList=a.data});const d=()=>{u.get("/employee/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name}}).then(a=>{e.tableData=a.data.list,e.total=a.data.total})};d();const v=()=>{e.name=null,d()},k=()=>{e.formVisible=!0,e.form={}},C=()=>{_.value.validate(a=>{a&&(e.form.id?S():E())})},E=()=>{u.post("/employee/add",e.form).then(a=>{a.code==="200"?(e.formVisible=!1,s.success("操作成功"),d()):s.error(a.msg)})},S=()=>{u.put("/employee/update",e.form).then(a=>{a.code==="200"?(e.formVisible=!1,s.success("操作成功"),d()):s.error(a.msg)})},N=a=>{e.form=JSON.parse(JSON.stringify(a)),e.formVisible=!0},U=a=>{x.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{u.delete("/employee/deleteById/"+a).then(l=>{l.code==="200"?(e.formVisible=!1,s.success("操作成功"),d()):s.error(l.msg)})}).catch()},h=a=>{e.ids=a.map(l=>l.id)},z=()=>{if(e.ids.length===0){s.warning("请选择数据");return}x.confirm("删除数据后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(()=>{u.delete("/employee/deleteBatch",{data:e.ids}).then(a=>{a.code==="200"?(e.formVisible=!1,s.success("操作成功"),d()):s.error(a.msg)})}).catch()},B=a=>{e.form.avatar=a.data},I=()=>{window.open("http://localhost:9090/employee/export")},D=a=>{a.code==="200"?(s.success("批量导入数据成功"),d()):s.error(a.msg)};return(a,l)=>{const f=j,r=G,y=K,i=oe,L=Q,R=W,p=ae,q=ne,A=re,V=se,F=de,O=ie,P=me,T=X;return g(),b("div",null,[c("div",pe,[t(f,{modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=o=>e.name=o),placeholder:"请输入名称查询","prefix-icon":"Search",style:{width:"240px","margin-right":"10px"}},null,8,["modelValue"]),t(r,{type:"primary",onClick:d},{default:n(()=>l[12]||(l[12]=[m("查 询")])),_:1}),t(r,{type:"warning",onClick:v},{default:n(()=>l[13]||(l[13]=[m("重 置")])),_:1})]),c("div",ue,[t(r,{type:"primary",onClick:k},{default:n(()=>l[14]||(l[14]=[m("新 增")])),_:1}),t(r,{type:"danger",onClick:z},{default:n(()=>l[15]||(l[15]=[m("批量删除")])),_:1}),t(y,{"on-success":D,"show-file-list":!1,action:"http://localhost:9090/employee/import",style:{display:"inline-block",margin:"0 10px"}},{default:n(()=>[t(r,{type:"info"},{default:n(()=>l[16]||(l[16]=[m("导入")])),_:1})]),_:1}),t(r,{type:"success",onClick:I},{default:n(()=>l[17]||(l[17]=[m("导出")])),_:1})]),c("div",fe,[t(L,{data:e.tableData,stripe:"",onSelectionChange:h},{default:n(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"账号",prop:"username"}),t(i,{label:"头像"},{default:n(o=>[o.row.avatar?(g(),b("img",{key:0,src:o.row.avatar,alt:"",style:{display:"block",width:"40px",height:"40px","border-radius":"50%"}},null,8,ce)):Y("",!0)]),_:1}),l[18]||(l[18]=m(" > ")),t(i,{label:"名称",prop:"name"}),t(i,{label:"性别",prop:"sex"}),t(i,{label:"工号",prop:"no"}),t(i,{label:"年龄",prop:"age"}),t(i,{label:"个人简介",prop:"description","show-overflow-tooltip":""}),t(i,{label:"部门",prop:"departmentName"}),t(i,{label:"操作",width:"120"},{default:n(o=>[t(r,{icon:w(Z),circle:"",type:"primary",onClick:M=>N(o.row)},null,8,["icon","onClick"]),t(r,{icon:w(H),circle:"",type:"danger",onClick:M=>U(o.row.id)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),c("div",ge,[t(R,{"current-page":e.pageNum,"onUpdate:currentPage":l[1]||(l[1]=o=>e.pageNum=o),"page-size":e.pageSize,"onUpdate:pageSize":l[2]||(l[2]=o=>e.pageSize=o),"page-sizes":[5,10,15,20],total:e.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:d,onCurrentChange:d},null,8,["current-page","page-size","total"])])]),t(T,{modelValue:e.formVisible,"onUpdate:modelValue":l[11]||(l[11]=o=>e.formVisible=o),"destroy-on-close":"",title:"员工信息",width:"500"},{footer:n(()=>[c("div",be,[t(r,{onClick:l[10]||(l[10]=o=>e.formVisible=!1)},{default:n(()=>l[20]||(l[20]=[m("取 消")])),_:1}),t(r,{type:"primary",onClick:C},{default:n(()=>l[21]||(l[21]=[m("保 存")])),_:1})])]),default:n(()=>[t(P,{ref_key:"formRef",ref:_,model:e.form,rules:e.rules,"label-width":"80px",style:{"padding-right":"40px","padding-top":"20px"}},{default:n(()=>[t(p,{label:"账号",prop:"username"},{default:n(()=>[t(f,{modelValue:e.form.username,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.username=o),disabled:e.form.id,autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue","disabled"])]),_:1}),t(p,{label:"部门"},{default:n(()=>[t(A,{modelValue:e.form.departmentId,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.departmentId=o),style:{width:"100%"}},{default:n(()=>[(g(!0),b(ee,null,le(e.departmentList,o=>(g(),te(q,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"头像"},{default:n(()=>[t(y,{"on-success":B,action:"http://localhost:9090/files/upload","list-type":"picture"},{default:n(()=>[t(r,{type:"primary"},{default:n(()=>l[19]||(l[19]=[m("上传头像")])),_:1})]),_:1})]),_:1}),t(p,{label:"名称",prop:"name"},{default:n(()=>[t(f,{modelValue:e.form.name,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.name=o),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(p,{label:"性别"},{default:n(()=>[t(F,{modelValue:e.form.sex,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.sex=o)},{default:n(()=>[t(V,{label:"男"}),t(V,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"工号",prop:"no"},{default:n(()=>[t(f,{modelValue:e.form.no,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.no=o),autocomplete:"off",placeholder:"请输入工号"},null,8,["modelValue"])]),_:1}),t(p,{label:"年龄"},{default:n(()=>[t(O,{modelValue:e.form.age,"onUpdate:modelValue":l[8]||(l[8]=o=>e.form.age=o),min:18,autocomplete:"off",placeholder:"请输入年龄",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),t(p,{label:"个人介绍"},{default:n(()=>[t(f,{modelValue:e.form.description,"onUpdate:modelValue":l[9]||(l[9]=o=>e.form.description=o),rows:3,autocomplete:"off",placeholder:"请输入个人介绍",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{ze as default};
