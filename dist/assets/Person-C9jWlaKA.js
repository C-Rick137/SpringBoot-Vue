/* empty css             *//* empty css                  *//* empty css               *//* empty css              *//* empty css                 */import{r as u}from"./request-ClfIVEhE.js";import{K as B,r as N,c as p,b as o,w as a,Z as k,o as n,a as c,f as w,u as I,$ as S,i as q,d as M,L as d,p as P,N as R,A as C,T as J,W as O,X as A,Y as F,B as T}from"./index-C0GlKI4r.js";const j={class:"card",style:{"margin-left":"300px",width:"50%",padding:"40px 20px"}},G={style:{display:"flex",width:"100%","justify-content":"center","margin-bottom":"20px"}},K=["src"],L={key:0},W={style:{"text-align":"center"}},ee={__name:"Person",emits:["updateUser"],setup(X,{emit:_}){const g=B(),e=N({user:JSON.parse(localStorage.getItem("springBoot-Vue-user")),form:{},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}],no:[{required:!0,message:"请输入工号",trigger:"blur"}]}}),i=_;e.user.role==="EMP"?u.get("/employee/selectById/"+e.user.id).then(r=>{e.form=r.data}):e.form=e.user;const V=()=>{e.user.role==="EMP"?u.put("employee/update",e.form).then(r=>{r.code==="200"?(d.success("更新成功"),localStorage.setItem("springBoot-Vue-user",JSON.stringify(e.form)),i("updateUser",e.form)):d.error(r.msg)}):u.put("admin/update",e.form).then(r=>{r.code==="200"?(d.success("更新成功"),localStorage.setItem("springBoot-Vue-user",JSON.stringify(e.form)),i("updateUser",e.form)):d.error(r.msg)})},y=r=>{e.form.avatar=r.data};return(r,t)=>{const b=P,x=R,m=C,s=J,f=O,E=A,v=F,U=T,h=k;return n(),p("div",j,[o(h,{ref_key:"formRef",ref:g,model:e.form,rules:e.rules,"label-width":"80px",style:{"padding-right":"40px","padding-top":"20px"}},{default:a(()=>[c("div",G,[o(x,{"on-success":y,"show-file-list":!1,action:"http://localhost:9090/files/upload",class:"avatar-uploader"},{default:a(()=>[e.form.avatar?(n(),p("img",{key:0,src:e.form.avatar,class:"avatar"},null,8,K)):(n(),w(b,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(I(S))]),_:1}))]),_:1})]),o(s,{label:"账号",prop:"username"},{default:a(()=>[o(m,{modelValue:e.form.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.form.username=l),autocomplete:"off",disabled:"",placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),o(s,{label:"名称",prop:"name"},{default:a(()=>[o(m,{modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=l=>e.form.name=l),autocomplete:"off",placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e.form.role==="EMP"?(n(),p("div",L,[o(s,{label:"性别"},{default:a(()=>[o(E,{modelValue:e.form.sex,"onUpdate:modelValue":t[2]||(t[2]=l=>e.form.sex=l)},{default:a(()=>[o(f,{label:"男"}),o(f,{label:"女"})]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"工号",prop:"no"},{default:a(()=>[o(m,{modelValue:e.form.no,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.no=l),autocomplete:"off",disabled:"",placeholder:"请输入工号"},null,8,["modelValue"])]),_:1}),o(s,{label:"年龄"},{default:a(()=>[o(v,{modelValue:e.form.age,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.age=l),min:18,autocomplete:"off",placeholder:"请输入年龄",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),o(s,{label:"个人介绍"},{default:a(()=>[o(m,{modelValue:e.form.description,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.description=l),rows:3,autocomplete:"off",placeholder:"请输入个人介绍",type:"textarea"},null,8,["modelValue"])]),_:1})])):q("",!0),c("div",W,[o(U,{style:{padding:"20px 30px"},type:"primary",onClick:V},{default:a(()=>t[6]||(t[6]=[M("更新个人信息")])),_:1})])]),_:1},8,["model","rules"])])}}};export{ee as default};
